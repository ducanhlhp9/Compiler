PROGRAM HEAPSORT;

VAR  N : INTEGER;
     A : ARRAY(.100.) OF INTEGER;
     I : INTEGER;
PROCEDURE SWAP (A : INTEGER; B : INTEGER);
VAR TEMP : INTEGER;
BEGIN
	TEMP := A;
	A := B;
	B := TEMP;
END;

PROCEDURE MAXHEAPFY(I : INTEGER; N : INTEGER);
VAR LEFT    : INTEGER;
    RIGHT   : INTEGER;
    LARGEST : INTEGER;
BEGIN
	LEFT := 2 * I;
	RIGHT := LEFT + 1;
	LARGEST := I;
	IF LEFT <= N THEN
		BEGIN
			IF A(.LEFT.) > A(.LARGEST.) THEN
				LARGEST := LEFT;
		END;
	IF RIGHT <= N THEN
		BEGIN
			IF A(.RIGHT.) > A(.LARGEST.) THEN
				LARGEST := RIGHT;
		END;
	IF LARGEST != I THEN
		CALL SWAP (A(.LARGEST.), A(.I.));
		CALL MAXHEAPFY(LARGEST, N);
END;

PROCEDURE BUILDMAXHEAP;
BEGIN
	FOR I := N / 2 TO 1 DO
		BEGIN
			CALL MAXHEAPFY(I, N);
		END;
END;

PROCEDURE HEAPSORT;
BEGIN
	CALL BUILDMAXHEAP;
	FOR I := N TO 2 DO
		BEGIN
			CALL SWAP(A(.1.), A(.I.));
			CALL MAXHEAPFY(1, I - 1);
		END;
END;

BEGIN
	CALL WRITES ("Input N:");
	N := READI;
	FOR I := 1 TO N DO
		A(.I.) := READI;
	CALL HEAPSORT;
END.
